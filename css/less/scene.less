//colours

@background-colour: #16233a;

@star-colour: white;

@tree-colour-light: green;
@tree-colour-dark: darkgreen;

@tree-trunk-colour: #5A3612;

@snow-colour-light: #FFF8F8;
@snow-colour-medium: #898484;
@snow-colour-dark: #cebcbc;

@bauble-colour-1: red;
@bauble-colour-2: yellow;
@bauble-colour-3: purple;

// sizes

@min-width: 45em;
@max-width: 65em;
@min-height: 600px;
@max-height: 1080px;
@ground-height: 14.0em;

* {
    white-space: nowrap;
}


html {
    background-color: @background-colour;
    height: 100%;
    background-image: linear-gradient(0, transparent 55%, black 100%)

}


body {
    position: absolute;
    bottom: 0;

    width: 100%;
    height: 100%;
    min-height: @min-height;
    max-height: @max-height;

    overflow: hidden;
    z-index: 0;

    font-size: 14px;

    background-image: linear-gradient(0deg, @snow-colour-light, @snow-colour-dark @ground-height, transparent @ground-height);

    main {
        height: 100%;
        min-width: 50em;
        position: relative;
        max-width: 80em;
        margin: 0 auto;
        min-width: @min-width;
        max-width: @max-width;
    }
}


@media (max-width: 1200px) {
    body {
        font-size: 14px;
    }
}
@media (max-width: 800px) {
    body {
        font-size: 10px;
    }
}
@media (max-width: 540px) {
    body {
        font-size: 8px;
    }
}




.stars {
    width: @max-width;
    position: absolute;
    height: 100%;
}


.star {
    position: absolute;
    display: inline-block;
    width: 1em;
    height: 2em;

    background-image: radial-gradient(ellipse 100% 10% at 50%, @star-colour 0%, transparent 50%),
                      radial-gradient(ellipse 10% 100% at 50%, @star-colour 0%, transparent 50%),
                      radial-gradient(ellipse 75% 100% at 50%, fadeout(@star-colour, 50%) 0%, transparent 35%);
}

@tree-width: 22em;
@half-tree-width: @tree-width / 2.0;
@trunk-width: 3em;

.tree {

    position: absolute;
    display: inline-block;
    font-size: 0.3em;

    z-index: -1;

    &:after {
        content: '';
        display: inline-block;
        width: @tree-width;
        height: 12em;
        position: relative;

        background-image: radial-gradient(20em   at @half-tree-width - 15em -13em,  @background-colour 99%, transparent 100%),
                          radial-gradient(20em   at @half-tree-width + 15em -13em,  @background-colour 99%, transparent 100%),

                          radial-gradient(15.5em at @half-tree-width - 5em -11em,   @snow-colour-light 92%, @tree-colour-light 98%, @tree-colour-dark 99%, transparent 100%),
                          radial-gradient(15.5em at @half-tree-width + 5em -11em,   @snow-colour-light 90%, @tree-colour-light 95%, @tree-colour-dark 99%, transparent 100%),

                          radial-gradient(20em   at @half-tree-width - 16em  -11em, @background-colour 99%, transparent 100%),
                          radial-gradient(20em   at @half-tree-width + 16em -11em,  @background-colour 99%, transparent 100%),

                          radial-gradient(15.5em at @half-tree-width - 6em -8em,    @snow-colour-light 90%, @tree-colour-light 95%, @tree-colour-dark 99%, transparent 100%),
                          radial-gradient(15.5em at @half-tree-width + 6em -8em,    @snow-colour-light 90%, @tree-colour-light 95%, @tree-colour-dark 99%, transparent 100%),

                          radial-gradient(20em   at @half-tree-width - 15em -10em,  @background-colour  99%, transparent 100%),
                          radial-gradient(20em   at @half-tree-width + 15em -10em,  @background-colour 99%, transparent 100%),

                          radial-gradient(15.5em at @half-tree-width - 5em -5em,    @snow-colour-light 90%, @tree-colour-light 95%, @tree-colour-dark 99%, transparent 100%),
                          radial-gradient(15.5em at @half-tree-width + 5em -5em,    @snow-colour-light 90%, @tree-colour-light 95%, @tree-colour-dark 99%, transparent 100%);
    }

    &:before {
        content: '';
        display: inline-block;
        width: @trunk-width;
        height: 5em;

        position: absolute;
        left: (@tree-width / 2) - (@trunk-width / 2);
        bottom: 0;

        background-color: @tree-trunk-colour;
    }

    &.tree-1 {
        font-size: 0.75em;
        left: -7em;
        bottom: @ground-height + 1.5em;
    }
    &.tree-2 {
        font-size: 0.55em;
        left: 32em;
        bottom: @ground-height + 9em;
    }
    &.tree-3 {
        font-size: 0.2em;
        left: 53em;
        bottom: @ground-height + 53em;
    }
    &.tree-4 {
        font-size: 0.4em;
        left: -40em;
        bottom: @ground-height + 18em;
    }
    &.tree-5 {
        font-size: 0.3em;
        left: -79em;
        bottom: @ground-height + 29em;
    }

    &.christmas-tree {
        font-size: 0.4em;
        right: 22em;
        bottom: @ground-height + 18em;

        .decoration {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 1;
            background-image: radial-gradient(0.5em at 47% 25%, @bauble-colour-1 70%, transparent 100%),
                              radial-gradient(0.5em at 54% 22%, @bauble-colour-2 70%, transparent 100%),
                              radial-gradient(0.5em at 51% 32%, @bauble-colour-3 70%, transparent 100%),
                              radial-gradient(0.5em at 62% 33%, @bauble-colour-1 70%, transparent 100%),
                              radial-gradient(0.5em at 37% 29%, @bauble-colour-2 70%, transparent 100%),
                              radial-gradient(0.5em at 43% 19%, @bauble-colour-3 70%, transparent 100%),
                              radial-gradient(0.7em at 48% 54%, @bauble-colour-1 70%, transparent 100%),
                              radial-gradient(0.7em at 60% 53%, @bauble-colour-2 70%, transparent 100%),
                              radial-gradient(0.7em at 45% 42%, @bauble-colour-3 70%, transparent 100%),
                              radial-gradient(0.7em at 37% 51%, @bauble-colour-1 70%, transparent 100%),
                              radial-gradient(0.7em at 19% 55%, @bauble-colour-2 70%, transparent 100%),
                              radial-gradient(0.7em at 30% 53%, @bauble-colour-3 70%, transparent 100%),
                              radial-gradient(0.9em at 76% 51%, @bauble-colour-1 70%, transparent 100%),
                              radial-gradient(0.9em at 85% 70%, @bauble-colour-2 70%, transparent 100%),
                              radial-gradient(0.9em at 78% 75%, @bauble-colour-3 70%, transparent 100%),
                              radial-gradient(0.9em at 61% 76%, @bauble-colour-1 70%, transparent 100%),
                              radial-gradient(0.9em at 30% 75%, @bauble-colour-2 70%, transparent 100%),
                              radial-gradient(0.9em at 14% 72%,  @bauble-colour-3 70%, transparent 100%);

        }
    }
}


// houses

@house-wall-colour-light: #d8721d;
@house-wall-colour-medium: darken(@house-wall-colour-light, 4%);;
@house-wall-colour-dark: darken(@house-wall-colour-light, 10%);;

@house-roof-colour-light: #105066;
@house-roof-colour-medium: darken(@house-roof-colour-light, 4%);
@house-roof-colour-dark: darken(@house-roof-colour-light, 10%);;

@window-colour-light: #efe614;
@window-colour-dark: red;

@house-shadow-colour: rgba(0, 0, 0, 0.4);


.house {
    position: absolute;
    display: inline-block;
    font-size: 0.6em;

    &:after {
        content: '';
        display: block;
        position: absolute;
        background-color: @house-shadow-colour;
        z-index: -1;
        bottom: 0;
        left: 1em;
        transform: skew(26deg, 0);
        transform-origin: bottom;
    }

    .wall, .roof, .window {
        position: absolute;
    }

    .roof {
        overflow: hidden;
    }

    .window {
        overflow: hidden;
        width: 3em;
        height: 3em;

        &:after {
            content: '';
            display: block;
            width: 100%;
            height: 100%;
            position: relative;
            left: -1em;
            top: -1em;
            background: linear-gradient(0, @window-colour-dark -30%, @window-colour-light 21%);
        }
    }

    &.house-1 {

        right: 30em;
        bottom: @ground-height - 5em;
        z-index: 30;

        &:after {
            width: 8em;
            height: 4em;
            transform: skew(40deg, 3deg);
        }

        .wall {
            width: 8em;
            height: 0;

            bottom: 0;

            border-top: 7em solid @house-wall-colour-light;
            border-bottom: none;
            border-left: 0.8em solid transparent;
            border-right: 0.5em solid transparent;

            transform: skew(0, 3deg);
        }

        .roof {
            width: 14em;
            height: 6em;
            bottom: 6.4em;
            left: -2em;
            transform: skewY(-3deg);

            &:after {
                content: '';
                display: block;
                width: 16em;
                height: 16em;
                background-image: linear-gradient(137deg, @snow-colour-light 13%, @house-roof-colour-light 20%);
                transform: rotate(31deg) skew(-21deg, 8deg);
                top: 3em;
                position: absolute;
                left: -1.5em;
            }
        }

        .window-1 {
            bottom: 0em;
            left: 2em;
            transform: skew(3deg, 3deg);
            &:after {
                transform: skew(-2deg, 1deg);
            }
        }

        .window-2 {
            bottom: 2.5em;
            left: 1em;
            transform: skew(2deg, -1deg);
            &:after {
                transform: skew(-3deg, 1deg);
            }
        }

        .window-3 {
            bottom: 2.5em;
            left: 6em;
            transform: skew(-3deg, 3deg);
            &:after {
                transform: skew(-2deg, -1deg);
            }
        }
    }

    &.house-2 {

        right: 32em;
        bottom: @ground-height + 3em;
        z-index: 10;

        &:after {
            width: 7em;
            height: 2em;
            transform: skew(40deg, -5deg);
        }

        .wall {
            width: 7em;
            height: 0;

            bottom: 0;

            border-top: 12em solid @house-wall-colour-dark;
            border-bottom: none;
            border-left: 0.8em solid transparent;
            border-right: 0.5em solid transparent;

            transform: skew(0, -5deg);
        }

        .roof {
            width: 11em;
            height: 12em;
            bottom: 11em;
            left: -1em;
            transform: skewY(3deg);

            &:after {
                content: '';
                display: block;
                width: 15em;
                height: 14em;
                background-image: linear-gradient(126deg, @snow-colour-light 18%, @house-roof-colour-dark 29%);
                transform: rotate(20deg) skewY(44deg);
                top: 9em;
                position: absolute;
                left: -1em;
            }
        }

        .window-1 {
            bottom: 7em;
            left: 1em;
            transform: skew(10deg, 2deg);
            &:after {
                transform: skew(-20deg, -3deg);
            }
        }

        .window-2 {
            bottom: 2em;
            left: 1.5em;
            transform: skew(1deg, -3deg);
            &:after {
                transform: skew(-4deg, 1deg);
            }
        }

        .window-3 {
            bottom: 3em;
            left: 5em;
            transform: skew(4deg, -2deg);
            &:after {
                transform: skew(-1deg, 0deg);
            }
        }
    }

    &.house-3 {

        right: 14em;
        bottom: @ground-height - 2em;
        z-index: 20;

        &:after {
            width: 11em;
            height: 3em;
            transform: skew(40deg, -3deg);
        }

        .wall {
            width: 11em;
            height: 0;

            bottom: 0;

            border-top: 7em solid @house-wall-colour-medium;
            border-bottom: none;
            border-left: 0.8em solid transparent;
            border-right: 1.5em solid transparent;

            transform: rotate(-3deg);
        }

        .roof {
            width: 17em;
            height: 5em;
            bottom: 6em;
            transform: skew(-41deg, 2deg);

            &:after {
                content: '';
                display: block;
                width: 21em;
                height: 16em;
                background-image: linear-gradient(176deg, @snow-colour-light 13%, @house-roof-colour-medium 20%);
                transform: skew(54deg, 3deg);
                position: absolute;
            }
        }

        .window-1 {
            bottom: 2em;
            left: 1em;
            transform: skew(10deg, 2deg);
            &:after {
                transform: skew(-20deg, -3deg);
            }
        }

        .window-2 {
            bottom: 1em;
            left: 5em;
            transform: skew(-4deg, 1deg);
            &:after {
                transform: skew(3deg, 4deg);
            }
        }

        .window-3 {
            bottom: 1.5em;
            left: 9em;
            transform: skew(-3deg, -3deg);
            &:after {
                transform: skew(2deg, -3deg);
            }
        }
    }

}



// fireworks timing

@rocket-flight-time: 500ms;
@bloom-time: 750ms;
@sparkles-time: @bloom-time;

// fireworks colours

@bloom-colour-01: rgba(255, 100, 255, 0.25);
@bloom-colour-02: rgba(255, 255, 100, 0.25);
@bloom-colour-03: rgba(100, 255, 255, 0.25);
@bloom-colour-04: rgba(100, 100, 255, 0.25);
@bloom-colour-05: rgba(255, 100, 100, 0.25);


@-webkit-keyframes rocket-anim {
    0% {
        opacity: 0;
    }
    1% {
        left: 120%;
        opacity: 1;
    }
    99% {
        left: -20%;
        opacity: 1;
    }
    100% {
        opacity: 0;
    }
}


@-webkit-keyframes bloom-anim {
    0% {
        transform: scale(0.0);
    }
    50% {
        transform: scale(0.999);
    }
    100% {
        transform: scale(0.0);
    }
}


@-webkit-keyframes sparkles-anim-1 {
    0% {
        -webkit-transform: scale(0);
    }
    50% {
        -webkit-transform: scale(1);
    }
    100% {
        -webkit-transform: scale(0);
    }
}
@-webkit-keyframes sparkles-anim-y-1 {
    0% {
        top: 0px;
    }
    50% {
        top: -50px;
    }
    100% {
        top: 150px;
    }
}
@-webkit-keyframes sparkles-anim-x-1 {
    0% {
        left: 0px;
    }
    100% {
        left: 200px;
    }
}


@-webkit-keyframes sparkles-anim-2 {
    0% {
        -webkit-transform: scale(0);
    }
    50% {
        -webkit-transform: scale(1.5);
    }
    100% {
        -webkit-transform: scale(0);
    }
}
@-webkit-keyframes sparkles-anim-y-2 {
    0% {
        top: 0px;
    }
    50% {
        top: -80px;
    }
    100% {
        top: 130px;
    }
}
@-webkit-keyframes sparkles-anim-x-2 {
    0% {
        left: 0px;
    }
    100% {
        left: -200px;
    }
}

.fireworks {

    position: relative;
    z-index: -1;

    .rocket {

        width: 50%;
        height: .25em;

        transform: rotate(45deg);
        transform-origin: center left;
        z-index: 27;

        overflow: hidden;

        &:after {
            content: '';
            opacity: 0;
            width: 50px;
            height: 100%;
            position: absolute;

            background-image: radial-gradient(100% 25% at 0 50%, #ffffff 0%, transparent 100%);
        }

    }

    .bloom {

        position: absolute;
        width: 50em;
        height: 40em;
        transform: scale(0.0);
        margin: -20em 0 0 -25em;

        &.bloom-colour-01 {
            background-image: radial-gradient(closest-side at 50% 50%, @bloom-colour-01 0%, transparent 100%);
            -webkit-animation-delay: @rocket-flight-time + 113;
            margin: -21em 0 0 -24em;
        }
        &.bloom-colour-02 {
            background-image: radial-gradient(closest-side at 50% 50%, @bloom-colour-02 0%, transparent 100%);
            -webkit-animation-delay: @rocket-flight-time + 254;
            margin: -20em 0 0 -27em;
        }
        &.bloom-colour-03 {
            background-image: radial-gradient(closest-side at 50% 50%, @bloom-colour-03 0%, transparent 100%);
            -webkit-animation-delay: @rocket-flight-time + 301;
            margin: -18em 0 0 -21em;
        }
        &.bloom-colour-04 {
            background-image: radial-gradient(closest-side at 50% 50%, @bloom-colour-04 0%, transparent 100%);
            -webkit-animation-delay: @rocket-flight-time + 412;
            margin: -17em 0 0 -26em;
        }
        &.bloom-colour-05 {
            background-image: radial-gradient(closest-side at 50% 50%, @bloom-colour-05 0%, transparent 100%);
            -webkit-animation-delay: @rocket-flight-time + 533;
            margin: -22em 0 0 -26em;
        }

    }

    .sparkles {
        position: absolute;
        width: 0.5em;
        height: 0.5em;
        -webkit-transform: scale(0);
        background-image: radial-gradient(closest-side at 50% 50%, white 0%, transparent 100%);
    }



    &.active {

        .rocket:after {
            -webkit-animation: rocket-anim @rocket-flight-time ease;
        }

        .sparkles-1 {
            -webkit-animation: sparkles-anim-1   @sparkles-time ease-in-out @rocket-flight-time + 112,
                               sparkles-anim-x-1 @sparkles-time ease-in-out @rocket-flight-time + 112,
                               sparkles-anim-y-1 @sparkles-time ease-in-out @rocket-flight-time + 112;
        }
        .sparkles-2 {
            -webkit-animation: sparkles-anim-2   @sparkles-time ease-in-out @rocket-flight-time + 252,
                               sparkles-anim-x-2 @sparkles-time ease-in-out @rocket-flight-time + 252,
                               sparkles-anim-y-2 @sparkles-time ease-in-out @rocket-flight-time + 252;
        }
        .sparkles-3 {
            -webkit-animation: sparkles-anim-1   @sparkles-time ease-in-out @rocket-flight-time + 322,
                               sparkles-anim-x-2 @sparkles-time ease-in-out @rocket-flight-time + 322,
                               sparkles-anim-y-1 @sparkles-time ease-in-out @rocket-flight-time + 322;
        }
        .sparkles-4 {
            -webkit-animation: sparkles-anim-2   @sparkles-time ease-in-out @rocket-flight-time + 280,
                               sparkles-anim-x-1 @sparkles-time ease-in-out @rocket-flight-time + 280,
                               sparkles-anim-y-2 @sparkles-time ease-in-out @rocket-flight-time + 280;
        }

        .bloom {
            -webkit-animation-name: bloom-anim;
            -webkit-animation-duration: @bloom-time;
            -webkit-animation-function: ease;

        }

    }
}
